<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <title>Visual Text Recognition and Speech System</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    .section-card {
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      touch-action: manipulation;
    }
    
    .section-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }
    
    .section-card:hover::before,
    .section-card:active::before {
      left: 100%;
    }
    
    .section-card:hover,
    .section-card:active {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.15);
    }
    
    @media (hover: none) {
      .section-card:active {
        transform: scale(0.98);
      }
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
      animation: fadeIn 0.3s;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    .modal.active {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
    }
    
    .modal-content {
      background: white;
      width: 100%;
      max-width: 900px;
      max-height: 90%;
      overflow-y: auto;
      border-radius: 20px;
      animation: slideUp 0.3s;
      position: relative;
      -webkit-overflow-scrolling: touch;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slideUp {
      from { transform: translateY(50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .close-btn {
      position: sticky;
      top: 0;
      right: 0;
      background: #ef4444;
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 20px;
      z-index: 10;
      float: right;
      margin: 15px 15px 0 0;
      transition: all 0.3s;
      touch-action: manipulation;
    }
    
    .close-btn:hover,
    .close-btn:active {
      background: #dc2626;
      transform: rotate(90deg);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transition: all 0.3s;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }
    
    .btn-primary:hover,
    .btn-primary:active {
      transform: scale(1.05);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      transition: all 0.3s;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }
    
    .btn-secondary:hover,
    .btn-secondary:active {
      transform: scale(1.05);
      box-shadow: 0 10px 20px rgba(245, 87, 108, 0.3);
    }
    
    .recording {
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .word-item {
      transition: all 0.3s;
      touch-action: manipulation;
    }
    
    .word-item:hover,
    .word-item:active {
      background: #f3f4f6;
      transform: translateX(5px);
    }
    
    .loading-spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #667eea;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .gradient-red {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    
    .gradient-green {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    }
    
    .gradient-orange {
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    }
    
    .gradient-blue {
      background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
    }
    
    .gradient-pink {
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
    }

    input[type="file"] {
      display: none;
    }
    
    .file-upload-btn {
      display: inline-block;
      padding: 12px 24px;
      cursor: pointer;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 10px;
      transition: all 0.3s;
      touch-action: manipulation;
    }
    
    .file-upload-btn:hover,
    .file-upload-btn:active {
      transform: scale(1.05);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
    }

    /* Mobile optimizations */
    @media (max-width: 768px) {
      .modal-content {
        max-height: 95%;
        margin: 5px;
      }
      
      textarea, input, select {
        font-size: 16px !important; /* Prevents zoom on iOS */
      }
      
      .section-card:active::before {
        left: 100%;
      }
    }

    /* Improved touch targets for mobile */
    button, .section-card, .word-item {
      min-height: 44px;
    }

    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full w-full" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
  <div class="w-full h-full overflow-auto p-4 md:p-8"><!-- Header -->
   <div class="text-center mb-8 md:mb-12">
    <h1 id="appTitle" class="text-3xl md:text-5xl font-bold text-white mb-2 md:mb-4">Visual Text Recognition and Speech System</h1>
    <p class="text-white text-sm md:text-lg opacity-90">Your complete language and speech toolkit</p>
   </div><!-- Main Grid -->
   <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 max-w-7xl mx-auto"><!-- Text to Speech Card -->
    <div class="section-card bg-white rounded-2xl p-6 md:p-8 shadow-xl" onclick="openModal('ttsModal')">
     <div class="text-center">
      <div class="gradient-bg w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-6"><i class="fas fa-volume-up text-2xl md:text-4xl text-white"></i>
      </div>
      <h2 id="ttsSectionTitle" class="text-xl md:text-2xl font-bold text-gray-800 mb-2 md:mb-3">Text to Speech</h2>
      <p class="text-sm md:text-base text-gray-600">Convert text to natural speech</p>
     </div>
    </div><!-- Image OCR Card -->
    <div class="section-card bg-white rounded-2xl p-6 md:p-8 shadow-xl" onclick="openModal('ocrModal')">
     <div class="text-center">
      <div class="gradient-red w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-6"><i class="fas fa-image text-2xl md:text-4xl text-white"></i>
      </div>
      <h2 id="ocrSectionTitle" class="text-xl md:text-2xl font-bold text-gray-800 mb-2 md:mb-3">Image to Speech</h2>
      <p class="text-sm md:text-base text-gray-600">Extract text from images and speak</p>
     </div>
    </div><!-- Voice Typing Card -->
    <div class="section-card bg-white rounded-2xl p-6 md:p-8 shadow-xl" onclick="openModal('voiceModal')">
     <div class="text-center">
      <div class="gradient-green w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-6"><i class="fas fa-microphone text-2xl md:text-4xl text-white"></i>
      </div>
      <h2 id="voiceSectionTitle" class="text-xl md:text-2xl font-bold text-gray-800 mb-2 md:mb-3">Voice to Text</h2>
      <p class="text-sm md:text-base text-gray-600">Speak and convert to text</p>
     </div>
    </div><!-- Translator Card -->
    <div class="section-card bg-white rounded-2xl p-6 md:p-8 shadow-xl" onclick="openModal('translatorModal')">
     <div class="text-center">
      <div class="gradient-orange w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-6"><i class="fas fa-language text-2xl md:text-4xl text-white"></i>
      </div>
      <h2 id="translationSectionTitle" class="text-xl md:text-2xl font-bold text-gray-800 mb-2 md:mb-3">Translator</h2>
      <p class="text-sm md:text-base text-gray-600">Translate between 5 languages</p>
     </div>
    </div><!-- Dictionary Card -->
    <div class="section-card bg-white rounded-2xl p-6 md:p-8 shadow-xl" onclick="openModal('dictionaryModal')">
     <div class="text-center">
      <div class="gradient-blue w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-6"><i class="fas fa-book text-2xl md:text-4xl text-white"></i>
      </div>
      <h2 id="dictionarySectionTitle" class="text-xl md:text-2xl font-bold text-gray-800 mb-2 md:mb-3">Dictionary</h2>
      <p class="text-sm md:text-base text-gray-600">Learn 150+ words and phrases</p>
     </div>
    </div><!-- Paragraph Translator Card -->
    <div class="section-card bg-white rounded-2xl p-6 md:p-8 shadow-xl" onclick="openModal('paragraphModal')">
     <div class="text-center">
      <div class="gradient-pink w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-6"><i class="fas fa-paragraph text-2xl md:text-4xl text-white"></i>
      </div>
      <h2 id="paragraphSectionTitle" class="text-xl md:text-2xl font-bold text-gray-800 mb-2 md:mb-3">Paragraph Translator</h2>
      <p class="text-sm md:text-base text-gray-600">Translate paragraphs with AI</p>
     </div>
    </div>
   </div>
  </div><!-- Text to Speech Modal -->
  <div id="ttsModal" class="modal">
   <div class="modal-content"><button class="close-btn" onclick="closeModal('ttsModal')">√ó</button>
    <div class="p-6 md:p-8">
     <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4 md:mb-6 text-center">Text to Speech</h2><textarea id="ttsText" class="w-full h-32 md:h-40 p-3 md:p-4 border-2 border-gray-300 rounded-xl focus:border-purple-500 focus:outline-none text-sm md:text-base" placeholder="Type or paste your text here..."></textarea>
     <div class="mt-4 md:mt-6 grid grid-cols-2 gap-3 md:gap-4">
      <div><label class="block text-xs md:text-sm font-semibold text-gray-700 mb-2">Language</label> <select id="ttsLang" class="w-full p-2 md:p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-sm md:text-base"> <option value="en-US">English</option> <option value="hi-IN">Hindi</option> <option value="te-IN">Telugu</option> <option value="ta-IN">Tamil</option> <option value="kn-IN">Kannada</option> </select>
      </div>
      <div><label class="block text-xs md:text-sm font-semibold text-gray-700 mb-2">Speed</label> <select id="ttsRate" class="w-full p-2 md:p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-sm md:text-base"> <option value="0.5">Slow</option> <option value="1" selected>Normal</option> <option value="1.5">Fast</option> </select>
      </div>
     </div>
     <div class="mt-4 md:mt-6 flex gap-3 md:gap-4"><button onclick="speakTTS()" class="flex-1 btn-primary text-white py-3 md:py-4 rounded-xl font-semibold text-sm md:text-base"> <i class="fas fa-play mr-2"></i> Speak </button> <button onclick="stopTTS()" class="flex-1 btn-secondary text-white py-3 md:py-4 rounded-xl font-semibold text-sm md:text-base"> <i class="fas fa-stop mr-2"></i> Stop </button>
     </div>
    </div>
   </div>
  </div><!-- OCR Modal -->
  <div id="ocrModal" class="modal">
   <div class="modal-content"><button class="close-btn" onclick="closeModal('ocrModal')">√ó</button>
    <div class="p-6 md:p-8">
     <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4 md:mb-6 text-center">Image to Speech</h2>
     <div class="text-center mb-4 md:mb-6"><label for="imageUpload" class="file-upload-btn"> <i class="fas fa-upload mr-2"></i> Choose Image </label> <input type="file" id="imageUpload" accept="image/*" onchange="processImage()">
     </div>
     <div id="ocrLoading" class="hidden">
      <div class="loading-spinner"></div>
      <p class="text-center text-gray-600 text-sm md:text-base">Processing image...</p>
     </div>
     <div id="imagePreview" class="mb-4 md:mb-6 text-center hidden"><img id="previewImg" class="max-w-full h-auto max-h-64 md:max-h-80 mx-auto rounded-lg shadow-lg">
     </div><textarea id="ocrText" class="w-full h-32 md:h-40 p-3 md:p-4 border-2 border-gray-300 rounded-xl focus:border-purple-500 focus:outline-none text-sm md:text-base" placeholder="Extracted text will appear here..." readonly></textarea>
     <div class="mt-4 md:mt-6"><label class="block text-xs md:text-sm font-semibold text-gray-700 mb-2">Language</label> <select id="ocrLang" class="w-full p-2 md:p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-sm md:text-base"> <option value="en-US">English</option> <option value="hi-IN">Hindi</option> <option value="te-IN">Telugu</option> <option value="ta-IN">Tamil</option> <option value="kn-IN">Kannada</option> </select>
     </div>
     <div class="mt-4 md:mt-6 flex gap-3 md:gap-4"><button onclick="speakOCR()" class="flex-1 btn-primary text-white py-3 md:py-4 rounded-xl font-semibold text-sm md:text-base"> <i class="fas fa-play mr-2"></i> Speak </button> <button onclick="stopTTS()" class="flex-1 btn-secondary text-white py-3 md:py-4 rounded-xl font-semibold text-sm md:text-base"> <i class="fas fa-stop mr-2"></i> Stop </button>
     </div>
    </div>
   </div>
  </div><!-- Voice Typing Modal -->
  <div id="voiceModal" class="modal">
   <div class="modal-content"><button class="close-btn" onclick="closeModal('voiceModal')">√ó</button>
    <div class="p-6 md:p-8">
     <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4 md:mb-6 text-center">Voice to Text</h2>
     <div class="mb-4 md:mb-6"><label class="block text-xs md:text-sm font-semibold text-gray-700 mb-2">Language</label> <select id="voiceLang" class="w-full p-2 md:p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-sm md:text-base"> <option value="en-US">English</option> <option value="hi-IN">Hindi</option> <option value="te-IN">Telugu</option> <option value="ta-IN">Tamil</option> <option value="kn-IN">Kannada</option> </select>
     </div>
     <div class="text-center mb-4 md:mb-6"><button id="voiceBtn" onclick="toggleVoiceRecording()" class="btn-primary text-white py-4 md:py-6 px-8 md:px-12 rounded-full font-semibold text-base md:text-lg"> <i class="fas fa-microphone mr-2 text-xl md:text-2xl"></i> Start Recording </button>
      <p id="voiceStatus" class="mt-3 md:mt-4 text-xs md:text-sm text-gray-600"></p>
     </div><textarea id="voiceText" class="w-full h-32 md:h-40 p-3 md:p-4 border-2 border-gray-300 rounded-xl focus:border-purple-500 focus:outline-none text-sm md:text-base" placeholder="Your spoken text will appear here..."></textarea>
     <div class="mt-4 md:mt-6 flex gap-3 md:gap-4"><button onclick="clearVoiceText()" class="flex-1 bg-gray-500 text-white py-3 md:py-4 rounded-xl font-semibold hover:bg-gray-600 transition text-sm md:text-base"> <i class="fas fa-eraser mr-2"></i> Clear </button> <button onclick="copyVoiceText()" class="flex-1 btn-primary text-white py-3 md:py-4 rounded-xl font-semibold text-sm md:text-base"> <i class="fas fa-copy mr-2"></i> Copy </button>
     </div>
    </div>
   </div>
  </div><!-- Translator Modal -->
  <div id="translatorModal" class="modal">
   <div class="modal-content"><button class="close-btn" onclick="closeModal('translatorModal')">√ó</button>
    <div class="p-6 md:p-8">
     <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4 md:mb-6 text-center">Translator</h2>
     <div class="grid grid-cols-2 gap-3 md:gap-4 mb-4 md:mb-6">
      <div><label class="block text-xs md:text-sm font-semibold text-gray-700 mb-2">From</label> <select id="fromLang" class="w-full p-2 md:p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-sm md:text-base"> <option value="en">English</option> <option value="hi">Hindi</option> <option value="te">Telugu</option> <option value="ta">Tamil</option> <option value="kn">Kannada</option> </select>
      </div>
      <div><label class="block text-xs md:text-sm font-semibold text-gray-700 mb-2">To</label> <select id="toLang" class="w-full p-2 md:p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-sm md:text-base"> <option value="en">English</option> <option value="hi">Hindi</option> <option value="te">Telugu</option> <option value="ta">Tamil</option> <option value="kn">Kannada</option> </select>
      </div>
     </div><textarea id="inputText" class="w-full h-24 md:h-32 p-3 md:p-4 border-2 border-gray-300 rounded-xl focus:border-purple-500 focus:outline-none mb-3 md:mb-4 text-sm md:text-base" placeholder="Enter text to translate..."></textarea> <button onclick="translateText()" class="w-full btn-primary text-white py-3 md:py-4 rounded-xl font-semibold mb-3 md:mb-4 text-sm md:text-base"> <i class="fas fa-exchange-alt mr-2"></i> Translate </button>
     <div id="translationResult" class="w-full min-h-24 md:min-h-32 p-3 md:p-4 border-2 border-gray-300 rounded-xl bg-gray-50 mb-3 md:mb-4 text-sm md:text-base" style="user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;">
      Translation will appear here...
     </div><button onclick="speakTranslation()" class="w-full btn-secondary text-white py-3 md:py-4 rounded-xl font-semibold text-sm md:text-base"> <i class="fas fa-volume-up mr-2"></i> Speak Translation </button>
     <div class="mt-6 md:mt-8">
      <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-3 md:mb-4">Quick Translations</h3>
      <div class="max-h-64 md:max-h-96 overflow-y-auto">
       <div id="phrasesList" class="space-y-2"></div>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Dictionary Modal -->
  <div id="dictionaryModal" class="modal">
   <div class="modal-content"><button class="close-btn" onclick="closeModal('dictionaryModal')">√ó</button>
    <div class="p-6 md:p-8">
     <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4 md:mb-6 text-center">Dictionary</h2>
     <div class="mb-4 md:mb-6"><input type="text" id="searchWord" class="w-full p-3 md:p-4 border-2 border-gray-300 rounded-xl focus:border-purple-500 focus:outline-none text-sm md:text-base" placeholder="Search words..." onkeyup="filterDictionary()">
     </div>
     <div class="mb-4 md:mb-6"><label class="block text-xs md:text-sm font-semibold text-gray-700 mb-2">Select Language</label> <select id="dictLang" class="w-full p-2 md:p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-sm md:text-base" onchange="updateDictionary()"> <option value="en-US">English</option> <option value="hi-IN">Hindi</option> <option value="te-IN">Telugu</option> <option value="ta-IN">Tamil</option> <option value="kn-IN">Kannada</option> </select>
     </div>
     <div id="dictionaryList" class="max-h-96 md:max-h-[500px] overflow-y-auto space-y-2"></div>
    </div>
   </div>
  </div><!-- Paragraph Translator Modal -->
  <div id="paragraphModal" class="modal">
   <div class="modal-content"><button class="close-btn" onclick="closeModal('paragraphModal')">√ó</button>
    <div class="p-6 md:p-8">
     <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4 md:mb-6 text-center">Paragraph Translator</h2>
     <div class="grid grid-cols-2 gap-3 md:gap-4 mb-4 md:mb-6">
      <div><label class="block text-xs md:text-sm font-semibold text-gray-700 mb-2">From Language</label> <select id="paraFromLang" class="w-full p-2 md:p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-sm md:text-base"> <option value="en">English</option> <option value="hi">Hindi</option> <option value="te">Telugu</option> <option value="ta">Tamil</option> <option value="kn">Kannada</option> <option value="es">Spanish</option> <option value="fr">French</option> <option value="de">German</option> <option value="ja">Japanese</option> <option value="zh">Chinese</option> </select>
      </div>
      <div><label class="block text-xs md:text-sm font-semibold text-gray-700 mb-2">To Language</label> <select id="paraToLang" class="w-full p-2 md:p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-sm md:text-base"> <option value="en">English</option> <option value="hi">Hindi</option> <option value="te">Telugu</option> <option value="ta">Tamil</option> <option value="kn">Kannada</option> <option value="es">Spanish</option> <option value="fr">French</option> <option value="de">German</option> <option value="ja">Japanese</option> <option value="zh">Chinese</option> </select>
      </div>
     </div>
     <div class="mb-3 md:mb-4"><label class="block text-xs md:text-sm font-semibold text-gray-700 mb-2">Enter Text/Paragraph</label> <textarea id="paragraphInput" class="w-full h-32 md:h-40 p-3 md:p-4 border-2 border-gray-300 rounded-xl focus:border-purple-500 focus:outline-none text-sm md:text-base" placeholder="Type or paste your paragraph here..."></textarea>
      <p class="text-xs text-gray-500 mt-1"><span id="charCount">0</span> characters</p>
     </div><button onclick="translateParagraph()" class="w-full btn-primary text-white py-3 md:py-4 rounded-xl font-semibold mb-3 md:mb-4 text-sm md:text-base"> <i class="fas fa-language mr-2"></i> Translate </button>
     <div id="paragraphLoading" class="hidden mb-4">
      <div class="loading-spinner"></div>
      <p class="text-center text-gray-600 text-sm md:text-base">Translating...</p>
     </div>
     <div class="mb-3 md:mb-4"><label class="block text-xs md:text-sm font-semibold text-gray-700 mb-2">Translation</label>
      <div id="paragraphOutput" class="w-full min-h-32 md:min-h-40 p-3 md:p-4 border-2 border-gray-300 rounded-xl bg-gray-50 text-sm md:text-base" style="user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;">
       Translation will appear here...
      </div>
     </div><button onclick="speakParagraph()" class="w-full btn-secondary text-white py-3 md:py-4 rounded-xl font-semibold text-sm md:text-base"> <i class="fas fa-volume-up mr-2"></i> Speak Translation </button>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      app_title: "Visual Text Recognition and Speech System",
      tts_section_title: "Text to Speech",
      ocr_section_title: "Image to Speech",
      voice_section_title: "Voice to Text",
      translation_section_title: "Translator",
      dictionary_section_title: "Dictionary",
      paragraph_section_title: "Paragraph Translator"
    };

    let synth = window.speechSynthesis;
    let currentUtterance = null;
    let recognition = null;
    let isRecording = false;

    // Character counter for paragraph input
    document.addEventListener('DOMContentLoaded', function() {
      const paragraphInput = document.getElementById('paragraphInput');
      if (paragraphInput) {
        paragraphInput.addEventListener('input', function() {
          document.getElementById('charCount').textContent = this.value.length;
        });
      }
    });

    // Translation dictionary with 150+ words and phrases
    const translationDB = {
      en: {
        "Hello": "Hello", "Good morning": "Good morning", "Good night": "Good night",
        "Thank you": "Thank you", "Please": "Please", "Sorry": "Sorry",
        "Yes": "Yes", "No": "No", "Welcome": "Welcome", "Goodbye": "Goodbye",
        
        "One": "One", "Two": "Two", "Three": "Three", "Four": "Four", "Five": "Five",
        "Six": "Six", "Seven": "Seven", "Eight": "Eight", "Nine": "Nine", "Ten": "Ten",
        
        "Mother": "Mother", "Father": "Father", "Brother": "Brother", "Sister": "Sister",
        "Family": "Family", "Friend": "Friend", "Husband": "Husband", "Wife": "Wife",
        
        "Water": "Water", "Food": "Food", "House": "House", "Book": "Book",
        "School": "School", "Teacher": "Teacher", "Student": "Student",
        "Love": "Love", "Peace": "Peace", "Happy": "Happy", "Sad": "Sad",
        
        "Today": "Today", "Tomorrow": "Tomorrow", "Yesterday": "Yesterday",
        "Morning": "Morning", "Evening": "Evening", "Night": "Night",
        
        "What": "What", "Where": "Where", "When": "When", "Who": "Who", "Why": "Why",
        "How": "How", "How much": "How much",
        
        "Go": "Go", "Come": "Come", "Eat": "Eat", "Drink": "Drink",
        "Sleep": "Sleep", "Work": "Work", "Study": "Study", "Play": "Play",
        
        "Market": "Market", "Hospital": "Hospital", "Temple": "Temple",
        "Office": "Office", "Home": "Home", "City": "City", "Village": "Village",
        
        "Red": "Red", "Blue": "Blue", "Green": "Green", "Yellow": "Yellow",
        "White": "White", "Black": "Black",
        
        "Head": "Head", "Hand": "Hand", "Leg": "Leg", "Eye": "Eye", "Ear": "Ear",
        
        "Sun": "Sun", "Moon": "Moon", "Star": "Star", "Rain": "Rain", "Tree": "Tree",
        
        "How are you": "How are you", "What is your name": "What is your name",
        "I am fine": "I am fine", "Nice to meet you": "Nice to meet you",
        "See you later": "See you later", "Take care": "Take care",
        "Good luck": "Good luck", "Congratulations": "Congratulations",
        "I love you": "I love you", "I miss you": "I miss you"
      },
      hi: {
        "Hello": "‡§®‡§Æ‡§∏‡•ç‡§§‡•á", "Good morning": "‡§∏‡•Å‡§™‡•ç‡§∞‡§≠‡§æ‡§§", "Good night": "‡§∂‡•Å‡§≠ ‡§∞‡§æ‡§§‡•ç‡§∞‡§ø",
        "Thank you": "‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶", "Please": "‡§ï‡•É‡§™‡§Ø‡§æ", "Sorry": "‡§Æ‡§æ‡§´‡§º ‡§ï‡•Ä‡§ú‡§ø‡§è",
        "Yes": "‡§π‡§æ‡§Å", "No": "‡§®‡§π‡•Ä‡§Ç", "Welcome": "‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à", "Goodbye": "‡§Ö‡§≤‡§µ‡§ø‡§¶‡§æ",
        
        "One": "‡§è‡§ï", "Two": "‡§¶‡•ã", "Three": "‡§§‡•Ä‡§®", "Four": "‡§ö‡§æ‡§∞", "Five": "‡§™‡§æ‡§Å‡§ö",
        "Six": "‡§õ‡§π", "Seven": "‡§∏‡§æ‡§§", "Eight": "‡§Ü‡§†", "Nine": "‡§®‡•å", "Ten": "‡§¶‡§∏",
        
        "Mother": "‡§Æ‡§æ‡§Å", "Father": "‡§™‡§ø‡§§‡§æ", "Brother": "‡§≠‡§æ‡§à", "Sister": "‡§¨‡§π‡§®",
        "Family": "‡§™‡§∞‡§ø‡§µ‡§æ‡§∞", "Friend": "‡§¶‡•ã‡§∏‡•ç‡§§", "Husband": "‡§™‡§§‡§ø", "Wife": "‡§™‡§§‡•ç‡§®‡•Ä",
        
        "Water": "‡§™‡§æ‡§®‡•Ä", "Food": "‡§≠‡•ã‡§ú‡§®", "House": "‡§ò‡§∞", "Book": "‡§ï‡§ø‡§§‡§æ‡§¨",
        "School": "‡§∏‡•ç‡§ï‡•Ç‡§≤", "Teacher": "‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï", "Student": "‡§õ‡§æ‡§§‡•ç‡§∞",
        "Love": "‡§™‡•ç‡§Ø‡§æ‡§∞", "Peace": "‡§∂‡§æ‡§Ç‡§§‡§ø", "Happy": "‡§ñ‡•Å‡§∂", "Sad": "‡§¶‡•Å‡§ñ‡•Ä",
        
        "Today": "‡§Ü‡§ú", "Tomorrow": "‡§ï‡§≤", "Yesterday": "‡§ï‡§≤",
        "Morning": "‡§∏‡•Å‡§¨‡§π", "Evening": "‡§∂‡§æ‡§Æ", "Night": "‡§∞‡§æ‡§§",
        
        "What": "‡§ï‡•ç‡§Ø‡§æ", "Where": "‡§ï‡§π‡§æ‡§Å", "When": "‡§ï‡§¨", "Who": "‡§ï‡•å‡§®", "Why": "‡§ï‡•ç‡§Ø‡•ã‡§Ç",
        "How": "‡§ï‡•à‡§∏‡•á", "How much": "‡§ï‡§ø‡§§‡§®‡§æ",
        
        "Go": "‡§ú‡§æ‡§ì", "Come": "‡§Ü‡§ì", "Eat": "‡§ñ‡§æ‡§ì", "Drink": "‡§™‡§ø‡§Ø‡•ã",
        "Sleep": "‡§∏‡•ã‡§ì", "Work": "‡§ï‡§æ‡§Æ", "Study": "‡§™‡§¢‡§º‡§æ‡§à", "Play": "‡§ñ‡•á‡§≤",
        
        "Market": "‡§¨‡§æ‡§ú‡§º‡§æ‡§∞", "Hospital": "‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤", "Temple": "‡§Æ‡§Ç‡§¶‡§ø‡§∞",
        "Office": "‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø", "Home": "‡§ò‡§∞", "City": "‡§∂‡§π‡§∞", "Village": "‡§ó‡§æ‡§Å‡§µ",
        
        "Red": "‡§≤‡§æ‡§≤", "Blue": "‡§®‡•Ä‡§≤‡§æ", "Green": "‡§π‡§∞‡§æ", "Yellow": "‡§™‡•Ä‡§≤‡§æ",
        "White": "‡§∏‡§´‡§º‡•á‡§¶", "Black": "‡§ï‡§æ‡§≤‡§æ",
        
        "Head": "‡§∏‡§ø‡§∞", "Hand": "‡§π‡§æ‡§•", "Leg": "‡§™‡•à‡§∞", "Eye": "‡§Ü‡§Å‡§ñ", "Ear": "‡§ï‡§æ‡§®",
        
        "Sun": "‡§∏‡•Ç‡§∞‡•ç‡§Ø", "Moon": "‡§ö‡§Ç‡§¶‡•ç‡§∞‡§Æ‡§æ", "Star": "‡§§‡§æ‡§∞‡§æ", "Rain": "‡§¨‡§æ‡§∞‡§ø‡§∂", "Tree": "‡§™‡•á‡§°‡§º",
        
        "How are you": "‡§Ü‡§™ ‡§ï‡•à‡§∏‡•á ‡§π‡•à‡§Ç", "What is your name": "‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à",
        "I am fine": "‡§Æ‡•à‡§Ç ‡§†‡•Ä‡§ï ‡§π‡•Ç‡§Å", "Nice to meet you": "‡§Ü‡§™‡§∏‡•á ‡§Æ‡§ø‡§≤‡§ï‡§∞ ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§≤‡§ó‡§æ",
        "See you later": "‡§´‡§ø‡§∞ ‡§Æ‡§ø‡§≤‡•á‡§Ç‡§ó‡•á", "Take care": "‡§ñ‡•ç‡§Ø‡§æ‡§≤ ‡§∞‡§ñ‡§®‡§æ",
        "Good luck": "‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Ç", "Congratulations": "‡§¨‡§ß‡§æ‡§à ‡§π‡•ã",
        "I love you": "‡§Æ‡•à‡§Ç ‡§§‡•Å‡§Æ‡§∏‡•á ‡§™‡•ç‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§§‡§æ ‡§π‡•Ç‡§Å", "I miss you": "‡§Æ‡•Å‡§ù‡•á ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§∞‡•Ä ‡§Ø‡§æ‡§¶ ‡§Ü‡§§‡•Ä ‡§π‡•à"
      },
      te: {
        "Hello": "‡∞®‡∞Æ‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞Ç", "Good morning": "‡∞∂‡±Å‡∞≠‡±ã‡∞¶‡∞Ø‡∞Ç", "Good night": "‡∞∂‡±Å‡∞≠ ‡∞∞‡∞æ‡∞§‡±ç‡∞∞‡∞ø",
        "Thank you": "‡∞ß‡∞®‡±ç‡∞Ø‡∞µ‡∞æ‡∞¶‡∞æ‡∞≤‡±Å", "Please": "‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø", "Sorry": "‡∞ï‡±ç‡∞∑‡∞Æ‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
        "Yes": "‡∞Ö‡∞µ‡±Å‡∞®‡±Å", "No": "‡∞ï‡∞æ‡∞¶‡±Å", "Welcome": "‡∞∏‡±ç‡∞µ‡∞æ‡∞ó‡∞§‡∞Ç", "Goodbye": "‡∞µ‡±Ü‡∞≥‡±ç‡∞≥‡±ä‡∞¶‡±ç‡∞¶‡±Å",
        
        "One": "‡∞í‡∞ï‡∞ü‡∞ø", "Two": "‡∞∞‡±Ü‡∞Ç‡∞°‡±Å", "Three": "‡∞Æ‡±Ç‡∞°‡±Å", "Four": "‡∞®‡∞æ‡∞≤‡±Å‡∞ó‡±Å", "Five": "‡∞ê‡∞¶‡±Å",
        "Six": "‡∞Ü‡∞∞‡±Å", "Seven": "‡∞è‡∞°‡±Å", "Eight": "‡∞é‡∞®‡∞ø‡∞Æ‡∞ø‡∞¶‡∞ø", "Nine": "‡∞§‡±ä‡∞Æ‡±ç‡∞Æ‡∞ø‡∞¶‡∞ø", "Ten": "‡∞™‡∞¶‡∞ø",
        
        "Mother": "‡∞Ö‡∞Æ‡±ç‡∞Æ", "Father": "‡∞®‡∞æ‡∞®‡±ç‡∞®", "Brother": "‡∞Ö‡∞®‡±ç‡∞®", "Sister": "‡∞Ö‡∞ï‡±ç‡∞ï",
        "Family": "‡∞ï‡±Å‡∞ü‡±Å‡∞Ç‡∞¨‡∞Ç", "Friend": "‡∞∏‡±ç‡∞®‡±á‡∞π‡∞ø‡∞§‡±Å‡∞°‡±Å", "Husband": "‡∞≠‡∞∞‡±ç‡∞§", "Wife": "‡∞≠‡∞æ‡∞∞‡±ç‡∞Ø",
        
        "Water": "‡∞®‡±Ä‡∞∞‡±Å", "Food": "‡∞Ü‡∞π‡∞æ‡∞∞‡∞Ç", "House": "‡∞á‡∞≤‡±ç‡∞≤‡±Å", "Book": "‡∞™‡±Å‡∞∏‡±ç‡∞§‡∞ï‡∞Ç",
        "School": "‡∞™‡∞æ‡∞†‡∞∂‡∞æ‡∞≤", "Teacher": "‡∞ó‡±Å‡∞∞‡±Å‡∞µ‡±Å", "Student": "‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ‡∞∞‡±ç‡∞•‡∞ø",
        "Love": "‡∞™‡±ç‡∞∞‡±á‡∞Æ", "Peace": "‡∞∂‡∞æ‡∞Ç‡∞§‡∞ø", "Happy": "‡∞∏‡∞Ç‡∞§‡±ã‡∞∑‡∞Ç", "Sad": "‡∞¨‡∞æ‡∞ß",
        
        "Today": "‡∞à‡∞∞‡±ã‡∞ú‡±Å", "Tomorrow": "‡∞∞‡±á‡∞™‡±Å", "Yesterday": "‡∞®‡∞ø‡∞®‡±ç‡∞®",
        "Morning": "‡∞â‡∞¶‡∞Ø‡∞Ç", "Evening": "‡∞∏‡∞æ‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞Ç", "Night": "‡∞∞‡∞æ‡∞§‡±ç‡∞∞‡∞ø",
        
        "What": "‡∞è‡∞Æ‡∞ø‡∞ü‡∞ø", "Where": "‡∞é‡∞ï‡±ç‡∞ï‡∞°", "When": "‡∞é‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å", "Who": "‡∞é‡∞µ‡∞∞‡±Å", "Why": "‡∞é‡∞Ç‡∞¶‡±Å‡∞ï‡±Å",
        "How": "‡∞é‡∞≤‡∞æ", "How much": "‡∞é‡∞Ç‡∞§",
        
        "Go": "‡∞µ‡±Ü‡∞≥‡±ç‡∞≥‡±Å", "Come": "‡∞∞‡∞æ", "Eat": "‡∞§‡∞ø‡∞®‡±Å", "Drink": "‡∞§‡±ç‡∞∞‡∞æ‡∞ó‡±Å",
        "Sleep": "‡∞®‡∞ø‡∞¶‡±ç‡∞∞", "Work": "‡∞™‡∞®‡∞ø", "Study": "‡∞ö‡∞¶‡±Å‡∞µ‡±Å", "Play": "‡∞Ü‡∞ü",
        
        "Market": "‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Ü‡∞ü‡±ç", "Hospital": "‡∞Ü‡∞∏‡±Å‡∞™‡∞§‡±ç‡∞∞‡∞ø", "Temple": "‡∞ó‡±Å‡∞°‡∞ø",
        "Office": "‡∞ï‡∞æ‡∞∞‡±ç‡∞Ø‡∞æ‡∞≤‡∞Ø‡∞Ç", "Home": "‡∞á‡∞≤‡±ç‡∞≤‡±Å", "City": "‡∞®‡∞ó‡∞∞‡∞Ç", "Village": "‡∞ó‡±ç‡∞∞‡∞æ‡∞Æ‡∞Ç",
        
        "Red": "‡∞é‡∞∞‡±Å‡∞™‡±Å", "Blue": "‡∞®‡±Ä‡∞≤‡∞Ç", "Green": "‡∞Ü‡∞ï‡±Å‡∞™‡∞ö‡±ç‡∞ö", "Yellow": "‡∞™‡∞∏‡±Å‡∞™‡±Å",
        "White": "‡∞§‡±Ü‡∞≤‡±Å‡∞™‡±Å", "Black": "‡∞®‡∞≤‡±Å‡∞™‡±Å",
        
        "Head": "‡∞§‡∞≤", "Hand": "‡∞ö‡±á‡∞Ø‡∞ø", "Leg": "‡∞ï‡∞æ‡∞≤‡±Å", "Eye": "‡∞ï‡∞®‡±ç‡∞®‡±Å", "Ear": "‡∞ö‡±Ü‡∞µ‡∞ø",
        
        "Sun": "‡∞∏‡±Ç‡∞∞‡±ç‡∞Ø‡±Å‡∞°‡±Å", "Moon": "‡∞ö‡∞Ç‡∞¶‡±ç‡∞∞‡±Å‡∞°‡±Å", "Star": "‡∞®‡∞ï‡±ç‡∞∑‡∞§‡±ç‡∞∞‡∞Ç", "Rain": "‡∞µ‡∞∞‡±ç‡∞∑‡∞Ç", "Tree": "‡∞ö‡±Ü‡∞ü‡±ç‡∞ü‡±Å",
        
        "How are you": "‡∞Æ‡±Ä‡∞∞‡±Å ‡∞é‡∞≤‡∞æ ‡∞â‡∞®‡±ç‡∞®‡∞æ‡∞∞‡±Å", "What is your name": "‡∞Æ‡±Ä ‡∞™‡±á‡∞∞‡±Å ‡∞è‡∞Æ‡∞ø‡∞ü‡∞ø",
        "I am fine": "‡∞®‡±á‡∞®‡±Å ‡∞¨‡∞æ‡∞ó‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞®‡±Å", "Nice to meet you": "‡∞Æ‡∞ø‡∞Æ‡±ç‡∞Æ‡∞≤‡±ç‡∞®‡∞ø ‡∞ï‡∞≤‡∞µ‡∞°‡∞Ç ‡∞Ü‡∞®‡∞Ç‡∞¶‡∞Ç‡∞ó‡∞æ ‡∞â‡∞Ç‡∞¶‡∞ø",
        "See you later": "‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§ ‡∞ï‡∞≤‡±Å‡∞¶‡±ç‡∞¶‡∞æ‡∞Ç", "Take care": "‡∞ú‡∞æ‡∞ó‡±ç‡∞∞‡∞§‡±ç‡∞§",
        "Good luck": "‡∞∂‡±Å‡∞≠‡∞æ‡∞ï‡∞æ‡∞Ç‡∞ï‡±ç‡∞∑‡∞≤‡±Å", "Congratulations": "‡∞Ö‡∞≠‡∞ø‡∞®‡∞Ç‡∞¶‡∞®‡∞≤‡±Å",
        "I love you": "‡∞®‡±á‡∞®‡±Å ‡∞®‡∞ø‡∞®‡±ç‡∞®‡±Å ‡∞™‡±ç‡∞∞‡±á‡∞Æ‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞®‡±Å", "I miss you": "‡∞®‡∞æ‡∞ï‡±Å ‡∞®‡±Å‡∞µ‡±ç‡∞µ‡±Å ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡±Å ‡∞µ‡∞∏‡±ç‡∞§‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞µ‡±Å"
      },
      ta: {
        "Hello": "‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç", "Good morning": "‡Æï‡Ææ‡Æ≤‡Øà ‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç", "Good night": "‡Æá‡Æ©‡Æø‡ÆØ ‡Æá‡Æ∞‡Æµ‡ØÅ",
        "Thank you": "‡Æ®‡Æ©‡Øç‡Æ±‡Æø", "Please": "‡Æ§‡ÆØ‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ", "Sorry": "‡ÆÆ‡Æ©‡Øç‡Æ©‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
        "Yes": "‡ÆÜ‡ÆÆ‡Øç", "No": "‡Æá‡Æ≤‡Øç‡Æ≤‡Øà", "Welcome": "‡Æµ‡Æ∞‡Æµ‡Øá‡Æ±‡Øç‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç", "Goodbye": "‡Æµ‡Æø‡Æü‡Øà‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç",
        
        "One": "‡Æí‡Æ©‡Øç‡Æ±‡ØÅ", "Two": "‡Æá‡Æ∞‡Æ£‡Øç‡Æü‡ØÅ", "Three": "‡ÆÆ‡ØÇ‡Æ©‡Øç‡Æ±‡ØÅ", "Four": "‡Æ®‡Ææ‡Æ©‡Øç‡Æï‡ØÅ", "Five": "‡Æê‡Æ®‡Øç‡Æ§‡ØÅ",
        "Six": "‡ÆÜ‡Æ±‡ØÅ", "Seven": "‡Æè‡Æ¥‡ØÅ", "Eight": "‡Æé‡Æü‡Øç‡Æü‡ØÅ", "Nine": "‡Æí‡Æ©‡Øç‡Æ™‡Æ§‡ØÅ", "Ten": "‡Æ™‡Æ§‡Øç‡Æ§‡ØÅ",
        
        "Mother": "‡ÆÖ‡ÆÆ‡Øç‡ÆÆ‡Ææ", "Father": "‡ÆÖ‡Æ™‡Øç‡Æ™‡Ææ", "Brother": "‡ÆÖ‡Æ£‡Øç‡Æ£‡Æ©‡Øç", "Sister": "‡ÆÖ‡Æï‡Øç‡Æï‡Ææ",
        "Family": "‡Æï‡ØÅ‡Æü‡ØÅ‡ÆÆ‡Øç‡Æ™‡ÆÆ‡Øç", "Friend": "‡Æ®‡Æ£‡Øç‡Æ™‡Æ©‡Øç", "Husband": "‡Æï‡Æ£‡Æµ‡Æ©‡Øç", "Wife": "‡ÆÆ‡Æ©‡Øà‡Æµ‡Æø",
        
        "Water": "‡Æ®‡ØÄ‡Æ∞‡Øç", "Food": "‡Æâ‡Æ£‡Æµ‡ØÅ", "House": "‡Æµ‡ØÄ‡Æü‡ØÅ", "Book": "‡Æ™‡ØÅ‡Æ§‡Øç‡Æ§‡Æï‡ÆÆ‡Øç",
        "School": "‡Æ™‡Æ≥‡Øç‡Æ≥‡Æø", "Teacher": "‡ÆÜ‡Æö‡Æø‡Æ∞‡Æø‡ÆØ‡Æ∞‡Øç", "Student": "‡ÆÆ‡Ææ‡Æ£‡Æµ‡Æ©‡Øç",
        "Love": "‡ÆÖ‡Æ©‡Øç‡Æ™‡ØÅ", "Peace": "‡ÆÖ‡ÆÆ‡Øà‡Æ§‡Æø", "Happy": "‡ÆÆ‡Æï‡Æø‡Æ¥‡Øç‡Æö‡Øç‡Æö‡Æø", "Sad": "‡Æö‡Øã‡Æï‡ÆÆ‡Øç",
        
        "Today": "‡Æá‡Æ©‡Øç‡Æ±‡ØÅ", "Tomorrow": "‡Æ®‡Ææ‡Æ≥‡Øà", "Yesterday": "‡Æ®‡Øá‡Æ±‡Øç‡Æ±‡ØÅ",
        "Morning": "‡Æï‡Ææ‡Æ≤‡Øà", "Evening": "‡ÆÆ‡Ææ‡Æ≤‡Øà", "Night": "‡Æá‡Æ∞‡Æµ‡ØÅ",
        
        "What": "‡Æé‡Æ©‡Øç‡Æ©", "Where": "‡Æé‡Æô‡Øç‡Æï‡Øá", "When": "‡Æé‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ", "Who": "‡ÆØ‡Ææ‡Æ∞‡Øç", "Why": "‡Æè‡Æ©‡Øç",
        "How": "‡Æé‡Æ™‡Øç‡Æ™‡Æü‡Æø", "How much": "‡Æé‡Æµ‡Øç‡Æµ‡Æ≥‡Æµ‡ØÅ",
        
        "Go": "‡Æ™‡Øã", "Come": "‡Æµ‡Ææ", "Eat": "‡Æö‡Ææ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡ØÅ", "Drink": "‡Æï‡ØÅ‡Æü‡Æø",
        "Sleep": "‡Æ§‡ØÇ‡Æô‡Øç‡Æï‡ØÅ", "Work": "‡Æµ‡Øá‡Æ≤‡Øà", "Study": "‡Æ™‡Æü‡Æø‡Æ™‡Øç‡Æ™‡ØÅ", "Play": "‡Æµ‡Æø‡Æ≥‡Øà‡ÆØ‡Ææ‡Æü‡Øç‡Æü‡ØÅ",
        
        "Market": "‡Æö‡Æ®‡Øç‡Æ§‡Øà", "Hospital": "‡ÆÆ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ‡ÆÆ‡Æ©‡Øà", "Temple": "‡Æï‡Øã‡Æµ‡Æø‡Æ≤‡Øç",
        "Office": "‡ÆÖ‡Æ≤‡ØÅ‡Æµ‡Æ≤‡Æï‡ÆÆ‡Øç", "Home": "‡Æµ‡ØÄ‡Æü‡ØÅ", "City": "‡Æ®‡Æï‡Æ∞‡ÆÆ‡Øç", "Village": "‡Æï‡Æø‡Æ∞‡Ææ‡ÆÆ‡ÆÆ‡Øç",
        
        "Red": "‡Æö‡Æø‡Æµ‡Æ™‡Øç‡Æ™‡ØÅ", "Blue": "‡Æ®‡ØÄ‡Æ≤‡ÆÆ‡Øç", "Green": "‡Æ™‡Æö‡Øç‡Æö‡Øà", "Yellow": "‡ÆÆ‡Æû‡Øç‡Æö‡Æ≥‡Øç",
        "White": "‡Æµ‡ØÜ‡Æ≥‡Øç‡Æ≥‡Øà", "Black": "‡Æï‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ",
        
        "Head": "‡Æ§‡Æ≤‡Øà", "Hand": "‡Æï‡Øà", "Leg": "‡Æï‡Ææ‡Æ≤‡Øç", "Eye": "‡Æï‡Æ£‡Øç", "Ear": "‡Æï‡Ææ‡Æ§‡ØÅ",
        
        "Sun": "‡Æö‡ØÇ‡Æ∞‡Æø‡ÆØ‡Æ©‡Øç", "Moon": "‡Æö‡Æ®‡Øç‡Æ§‡Æø‡Æ∞‡Æ©‡Øç", "Star": "‡Æ®‡Æü‡Øç‡Æö‡Æ§‡Øç‡Æ§‡Æø‡Æ∞‡ÆÆ‡Øç", "Rain": "‡ÆÆ‡Æ¥‡Øà", "Tree": "‡ÆÆ‡Æ∞‡ÆÆ‡Øç",
        
        "How are you": "‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æé‡Æ™‡Øç‡Æ™‡Æü‡Æø ‡Æá‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Øç", "What is your name": "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç ‡Æé‡Æ©‡Øç‡Æ©",
        "I am fine": "‡Æ®‡Ææ‡Æ©‡Øç ‡Æ®‡Æ≤‡ÆÆ‡Ææ‡Æï ‡Æá‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç", "Nice to meet you": "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æö‡Æ®‡Øç‡Æ§‡Æø‡Æ§‡Øç‡Æ§‡Æ§‡Æø‡Æ≤‡Øç ‡ÆÆ‡Æï‡Æø‡Æ¥‡Øç‡Æö‡Øç‡Æö‡Æø",
        "See you later": "‡Æ™‡Æø‡Æ©‡Øç‡Æ©‡Æ∞‡Øç ‡Æö‡Æ®‡Øç‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡Øã‡ÆÆ‡Øç", "Take care": "‡Æï‡Æµ‡Æ©‡ÆÆ‡Ææ‡Æï ‡Æá‡Æ∞‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        "Good luck": "‡Æµ‡Ææ‡Æ¥‡Øç‡Æ§‡Øç‡Æ§‡ØÅ‡Æï‡Øç‡Æï‡Æ≥‡Øç", "Congratulations": "‡Æµ‡Ææ‡Æ¥‡Øç‡Æ§‡Øç‡Æ§‡ØÅ‡Æï‡Øç‡Æï‡Æ≥‡Øç",
        "I love you": "‡Æ®‡Ææ‡Æ©‡Øç ‡Æâ‡Æ©‡Øç‡Æ©‡Øà ‡Æï‡Ææ‡Æ§‡Æ≤‡Æø‡Æï‡Øç‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç", "I miss you": "‡Æ®‡Ææ‡Æ©‡Øç ‡Æâ‡Æ©‡Øç‡Æ©‡Øà ‡ÆÆ‡Æø‡Æ∏‡Øç ‡Æ™‡Æ£‡Øç‡Æ±‡Øá‡Æ©‡Øç"
      },
      kn: {
        "Hello": "‡≤®‡≤Æ‡≤∏‡≥ç‡≤ï‡≤æ‡≤∞", "Good morning": "‡≤∂‡≥Å‡≤≠‡≥ã‡≤¶‡≤Ø", "Good night": "‡≤∂‡≥Å‡≤≠ ‡≤∞‡≤æ‡≤§‡≥ç‡≤∞‡≤ø",
        "Thank you": "‡≤ß‡≤®‡≥ç‡≤Ø‡≤µ‡≤æ‡≤¶‡≤ó‡≤≥‡≥Å", "Please": "‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å", "Sorry": "‡≤ï‡≥ç‡≤∑‡≤Æ‡≤ø‡≤∏‡≤ø",
        "Yes": "‡≤π‡≥å‡≤¶‡≥Å", "No": "‡≤á‡≤≤‡≥ç‡≤≤", "Welcome": "‡≤∏‡≥ç‡≤µ‡≤æ‡≤ó‡≤§", "Goodbye": "‡≤µ‡≤ø‡≤¶‡≤æ‡≤Ø",
        
        "One": "‡≤í‡≤Ç‡≤¶‡≥Å", "Two": "‡≤é‡≤∞‡≤°‡≥Å", "Three": "‡≤Æ‡≥Ç‡≤∞‡≥Å", "Four": "‡≤®‡≤æ‡≤≤‡≥ç‡≤ï‡≥Å", "Five": "‡≤ê‡≤¶‡≥Å",
        "Six": "‡≤Ü‡≤∞‡≥Å", "Seven": "‡≤è‡≤≥‡≥Å", "Eight": "‡≤é‡≤Ç‡≤ü‡≥Å", "Nine": "‡≤í‡≤Ç‡≤¨‡≤§‡≥ç‡≤§‡≥Å", "Ten": "‡≤π‡≤§‡≥ç‡≤§‡≥Å",
        
        "Mother": "‡≤Ö‡≤Æ‡≥ç‡≤Æ", "Father": "‡≤Ö‡≤™‡≥ç‡≤™", "Brother": "‡≤Ö‡≤£‡≥ç‡≤£", "Sister": "‡≤Ö‡≤ï‡≥ç‡≤ï",
        "Family": "‡≤ï‡≥Å‡≤ü‡≥Å‡≤Ç‡≤¨", "Friend": "‡≤∏‡≥ç‡≤®‡≥á‡≤π‡≤ø‡≤§", "Husband": "‡≤ó‡≤Ç‡≤°", "Wife": "‡≤π‡≥Ü‡≤Ç‡≤°‡≤§‡≤ø",
        
        "Water": "‡≤®‡≥Ä‡≤∞‡≥Å", "Food": "‡≤Ü‡≤π‡≤æ‡≤∞", "House": "‡≤Æ‡≤®‡≥Ü", "Book": "‡≤™‡≥Å‡≤∏‡≥ç‡≤§‡≤ï",
        "School": "‡≤∂‡≤æ‡≤≤‡≥Ü", "Teacher": "‡≤∂‡≤ø‡≤ï‡≥ç‡≤∑‡≤ï", "Student": "‡≤µ‡≤ø‡≤¶‡≥ç‡≤Ø‡≤æ‡≤∞‡≥ç‡≤•‡≤ø",
        "Love": "‡≤™‡≥ç‡≤∞‡≥Ä‡≤§‡≤ø", "Peace": "‡≤∂‡≤æ‡≤Ç‡≤§‡≤ø", "Happy": "‡≤∏‡≤Ç‡≤§‡≥ã‡≤∑", "Sad": "‡≤¶‡≥Å‡≤É‡≤ñ",
        
        "Today": "‡≤á‡≤Ç‡≤¶‡≥Å", "Tomorrow": "‡≤®‡≤æ‡≤≥‡≥Ü", "Yesterday": "‡≤®‡≤ø‡≤®‡≥ç‡≤®‡≥Ü",
        "Morning": "‡≤¨‡≥Ü‡≤≥‡≤ø‡≤ó‡≥ç‡≤ó‡≥Ü", "Evening": "‡≤∏‡≤Ç‡≤ú‡≥Ü", "Night": "‡≤∞‡≤æ‡≤§‡≥ç‡≤∞‡≤ø",
        
        "What": "‡≤è‡≤®‡≥Å", "Where": "‡≤é‡≤≤‡≥ç‡≤≤‡≤ø", "When": "‡≤Ø‡≤æ‡≤µ‡≤æ‡≤ó", "Who": "‡≤Ø‡≤æ‡≤∞‡≥Å", "Why": "‡≤è‡≤ï‡≥Ü",
        "How": "‡≤π‡≥á‡≤ó‡≥Ü", "How much": "‡≤é‡≤∑‡≥ç‡≤ü‡≥Å",
        
        "Go": "‡≤π‡≥ã‡≤ó‡≥Å", "Come": "‡≤¨‡≤æ", "Eat": "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å", "Drink": "‡≤ï‡≥Å‡≤°‡≤ø",
        "Sleep": "‡≤®‡≤ø‡≤¶‡≥ç‡≤∞‡≥Ü", "Work": "‡≤ï‡≥Ü‡≤≤‡≤∏", "Study": "‡≤Ö‡≤ß‡≥ç‡≤Ø‡≤Ø‡≤®", "Play": "‡≤Ü‡≤ü",
        
        "Market": "‡≤Æ‡≤æ‡≤∞‡≥Å‡≤ï‡≤ü‡≥ç‡≤ü‡≥Ü", "Hospital": "‡≤Ü‡≤∏‡≥ç‡≤™‡≤§‡≥ç‡≤∞‡≥Ü", "Temple": "‡≤¶‡≥á‡≤µ‡≤æ‡≤≤‡≤Ø",
        "Office": "‡≤ï‡≤ö‡≥á‡≤∞‡≤ø", "Home": "‡≤Æ‡≤®‡≥Ü", "City": "‡≤®‡≤ó‡≤∞", "Village": "‡≤ó‡≥ç‡≤∞‡≤æ‡≤Æ",
        
        "Red": "‡≤ï‡≥Ü‡≤Ç‡≤™‡≥Å", "Blue": "‡≤®‡≥Ä‡≤≤‡≤ø", "Green": "‡≤π‡≤∏‡≤ø‡≤∞‡≥Å", "Yellow": "‡≤π‡≤≥‡≤¶‡≤ø",
        "White": "‡≤¨‡≤ø‡≤≥‡≤ø", "Black": "‡≤ï‡≤™‡≥ç‡≤™‡≥Å",
        
        "Head": "‡≤§‡≤≤‡≥Ü", "Hand": "‡≤ï‡≥à", "Leg": "‡≤ï‡≤æ‡≤≤‡≥Å", "Eye": "‡≤ï‡≤£‡≥ç‡≤£‡≥Å", "Ear": "‡≤ï‡≤ø‡≤µ‡≤ø",
        
        "Sun": "‡≤∏‡≥Ç‡≤∞‡≥ç‡≤Ø", "Moon": "‡≤ö‡≤Ç‡≤¶‡≥ç‡≤∞", "Star": "‡≤®‡≤ï‡≥ç‡≤∑‡≤§‡≥ç‡≤∞", "Rain": "‡≤Æ‡≤≥‡≥Ü", "Tree": "‡≤Æ‡≤∞",
        
        "How are you": "‡≤®‡≥Ä‡≤µ‡≥Å ‡≤π‡≥á‡≤ó‡≤ø‡≤¶‡≥ç‡≤¶‡≥Ä‡≤∞‡≤ø", "What is your name": "‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤π‡≥Ü‡≤∏‡≤∞‡≥á‡≤®‡≥Å",
        "I am fine": "‡≤®‡≤æ‡≤®‡≥Å ‡≤ö‡≥Ü‡≤®‡≥ç‡≤®‡≤æ‡≤ó‡≤ø‡≤¶‡≥ç‡≤¶‡≥á‡≤®‡≥Ü", "Nice to meet you": "‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ‡≤®‡≥ç‡≤®‡≥Å ‡≤≠‡≥á‡≤ü‡≤ø ‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å ‡≤∏‡≤Ç‡≤§‡≥ã‡≤∑‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü",
        "See you later": "‡≤®‡≤Ç‡≤§‡≤∞ ‡≤≠‡≥á‡≤ü‡≤ø‡≤Ø‡≤æ‡≤ó‡≥ã‡≤£", "Take care": "‡≤ï‡≤æ‡≤≥‡≤ú‡≤ø ‡≤µ‡≤π‡≤ø‡≤∏‡≤ø",
        "Good luck": "‡≤∂‡≥Å‡≤≠‡≤æ‡≤∂‡≤Ø‡≤ó‡≤≥‡≥Å", "Congratulations": "‡≤Ö‡≤≠‡≤ø‡≤®‡≤Ç‡≤¶‡≤®‡≥Ü‡≤ó‡≤≥‡≥Å",
        "I love you": "‡≤®‡≤æ‡≤®‡≥Å ‡≤®‡≤ø‡≤®‡≥ç‡≤®‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≥ç‡≤∞‡≥Ä‡≤§‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≥á‡≤®‡≥Ü", "I miss you": "‡≤®‡≤æ‡≤®‡≥Å ‡≤®‡≤ø‡≤®‡≥ç‡≤®‡≤®‡≥ç‡≤®‡≥Å ‡≤Æ‡≤ø‡≤∏‡≥ç ‡≤Æ‡≤æ‡≤°‡≥Å‡≤§‡≥ç‡≤§‡≥á‡≤®‡≥Ü"
      }
    };

    // Dictionary words (150+ words and phrases)
    const dictionaryWords = [
      // Greetings
      "Hello", "Good morning", "Good afternoon", "Good evening", "Good night",
      "How are you", "I am fine", "Thank you", "Please", "Sorry", "Excuse me",
      "Yes", "No", "Maybe", "Welcome", "Goodbye",
      
      // Daily Greetings
      "What is your name", "My name is", "Nice to meet you", "How was your day",
      "Have a nice day", "See you later", "See you tomorrow", "Take care",
      "Good luck", "Congratulations", "You're welcome", "No problem",
      
      // Habitual Sentences
      "I wake up at 6 AM", "I brush my teeth", "I take a shower", "I have breakfast",
      "I go to work", "I go to school", "I am getting ready", "I am leaving now",
      "I will be late", "I am on my way", "I reached home", "I am tired",
      "I am hungry", "I am thirsty", "Let's eat", "The food is delicious",
      "I am full", "I need rest", "I am going to sleep", "Good night, sweet dreams",
      
      // Questions & Responses
      "Where are you going", "What are you doing", "Did you eat", "Are you free",
      "Can you help me", "I need help", "I don't know", "I understand",
      "I don't understand", "Please repeat", "Speak slowly please", "What does this mean",
      
      // Shopping
      "How much does it cost", "It's expensive", "It's cheap", "I want to buy",
      "Do you have", "Give me", "I will take this", "Keep the change",
      
      // Time & Days
      "What time is it", "It's 10 o'clock", "Today", "Tomorrow", "Yesterday",
      "Morning", "Afternoon", "Evening", "Night",
      "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday",
      
      // Numbers
      "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten",
      
      // Family
      "Mother", "Father", "Brother", "Sister", "Son", "Daughter",
      "Family", "Friend", "Husband", "Wife", "Grandfather", "Grandmother",
      
      // Common Objects
      "Water", "Food", "Tea", "Coffee", "Milk", "Rice", "Bread",
      "House", "Door", "Window", "Room", "Book", "Pen", "Phone", "Car",
      "Bike", "Bag", "Money", "Clothes",
      
      // Places
      "School", "College", "Hospital", "Temple", "Mosque", "Church",
      "Market", "Shop", "Office", "Home", "City", "Village",
      "Bank", "Post office", "Restaurant",
      
      // Actions
      "Go", "Come", "Eat", "Drink", "Sleep", "Wake up", "Sit", "Stand",
      "Walk", "Run", "Work", "Study", "Play", "Read", "Write",
      "Talk", "Listen", "See", "Watch", "Wait", "Stop",
      
      // Descriptions
      "Teacher", "Student", "Doctor", "Love", "Peace", "Happy", "Sad",
      "Good", "Bad", "Big", "Small", "Hot", "Cold", "New", "Old",
      
      // Colors
      "Red", "Blue", "Green", "Yellow", "White", "Black", "Orange", "Pink",
      
      // Body Parts
      "Head", "Hair", "Face", "Eye", "Ear", "Nose", "Mouth", "Hand", "Leg", "Foot",
      
      // Nature
      "Sun", "Moon", "Star", "Sky", "Rain", "Wind", "Cloud",
      "Tree", "Flower", "River", "Mountain",
      
      // Questions
      "What", "Where", "When", "Who", "Why", "How", "How much", "How many",
      
      // Emotions
      "I love you", "I miss you", "I am sorry", "Don't worry",
      "Be careful", "It's okay", "No worries", "That's great"
    ];

    function openModal(modalId) {
      document.getElementById(modalId).classList.add('active');
      document.body.style.overflow = 'hidden';
      if (modalId === 'translatorModal') {
        loadPhrases();
      } else if (modalId === 'dictionaryModal') {
        const dictionaryList = document.getElementById('dictionaryList');
        dictionaryList.innerHTML = '<p class="text-center text-gray-500 py-8">Enter a word to search in the dictionary</p>';
      }
    }

    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
      document.body.style.overflow = 'auto';
      stopTTS();
    }

    // Text to Speech Functions
    function speakTTS() {
      const text = document.getElementById('ttsText').value.trim();
      if (!text) {
        showMessage('Please enter text');
        return;
      }
      
      const lang = document.getElementById('ttsLang').value;
      const rate = parseFloat(document.getElementById('ttsRate').value);
      
      stopTTS();
      currentUtterance = new SpeechSynthesisUtterance(text);
      currentUtterance.lang = lang;
      currentUtterance.rate = rate;
      synth.speak(currentUtterance);
    }

    function stopTTS() {
      synth.cancel();
    }

    // OCR Functions
    function processImage() {
      const fileInput = document.getElementById('imageUpload');
      const file = fileInput.files[0];
      
      if (!file) return;
      
      if (!file.type.startsWith('image/')) {
        showMessage('Please select a valid image file');
        return;
      }
      
      const reader = new FileReader();
      reader.onload = function(e) {
        document.getElementById('previewImg').src = e.target.result;
        document.getElementById('imagePreview').classList.remove('hidden');
      };
      reader.readAsDataURL(file);
      
      document.getElementById('ocrLoading').classList.remove('hidden');
      document.getElementById('ocrText').value = '';
      
      Tesseract.recognize(
        file,
        'eng+hin+tel+tam+kan',
        {
          logger: m => {
            if (m.status === 'recognizing text') {
              const progress = Math.round(m.progress * 100);
              document.getElementById('ocrLoading').innerHTML = `
                <div class="loading-spinner"></div>
                <p class="text-center text-gray-600 text-sm md:text-base">Processing image... ${progress}%</p>
              `;
            }
          }
        }
      ).then(({ data: { text } }) => {
        document.getElementById('ocrLoading').classList.add('hidden');
        document.getElementById('ocrLoading').innerHTML = `
          <div class="loading-spinner"></div>
          <p class="text-center text-gray-600 text-sm md:text-base">Processing image...</p>
        `;
        
        if (text.trim()) {
          document.getElementById('ocrText').value = text;
          showMessage('Text extracted successfully!');
        } else {
          document.getElementById('ocrText').value = 'No text found in image. Please try another image with clear text.';
          showMessage('No text detected in image');
        }
      }).catch(err => {
        document.getElementById('ocrLoading').classList.add('hidden');
        document.getElementById('ocrLoading').innerHTML = `
          <div class="loading-spinner"></div>
          <p class="text-center text-gray-600 text-sm md:text-base">Processing image...</p>
        `;
        document.getElementById('ocrText').value = 'Error processing image. Please try again with a clearer image.';
        showMessage('Error processing image. Try a clearer photo.');
        console.error(err);
      });
    }

    function speakOCR() {
      const text = document.getElementById('ocrText').value.trim();
      if (!text) {
        showMessage('No text to speak');
        return;
      }
      
      const lang = document.getElementById('ocrLang').value;
      
      stopTTS();
      currentUtterance = new SpeechSynthesisUtterance(text);
      currentUtterance.lang = lang;
      synth.speak(currentUtterance);
    }

    // Voice Recognition Functions
    function initVoiceRecognition() {
      if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        recognition = new SpeechRecognition();
        
        recognition.continuous = false;
        recognition.interimResults = true;
        recognition.maxAlternatives = 1;
        
        recognition.onstart = function() {
          console.log('Speech recognition started');
          document.getElementById('voiceStatus').textContent = 'üé§ Listening... Speak now!';
          document.getElementById('voiceBtn').classList.add('recording');
        };
        
        recognition.onresult = function(event) {
          let finalTranscript = '';
          let interimTranscript = '';
          
          for (let i = event.resultIndex; i < event.results.length; i++) {
            const transcript = event.results[i][0].transcript;
            if (event.results[i].isFinal) {
              finalTranscript += transcript + ' ';
            } else {
              interimTranscript += transcript;
            }
          }
          
          if (finalTranscript) {
            const currentText = document.getElementById('voiceText').value;
            document.getElementById('voiceText').value = currentText + finalTranscript;
          }
          
          if (interimTranscript) {
            document.getElementById('voiceStatus').textContent = 'üé§ ' + interimTranscript;
          }
        };
        
        recognition.onerror = function(event) {
          console.error('Speech recognition error:', event.error);
          
          let errorMessage = 'Error: ';
          switch(event.error) {
            case 'no-speech':
              errorMessage += 'No speech detected. Please try again.';
              break;
            case 'audio-capture':
              errorMessage += 'Microphone not found or blocked.';
              break;
            case 'not-allowed':
              errorMessage += 'Microphone permission denied.';
              break;
            case 'network':
              errorMessage += 'Network error. Check your connection.';
              break;
            default:
              errorMessage += event.error;
          }
          
          showMessage(errorMessage);
          stopVoiceRecording();
        };
        
        recognition.onend = function() {
          console.log('Speech recognition ended');
          if (isRecording) {
            try {
              recognition.start();
            } catch(e) {
              console.log('Could not restart:', e);
              stopVoiceRecording();
            }
          } else {
            stopVoiceRecording();
          }
        };
        
        return true;
      } else {
        showMessage('Speech recognition not supported in this browser. Try Chrome or Edge.');
        return false;
      }
    }

    function toggleVoiceRecording() {
      if (isRecording) {
        stopVoiceRecording();
      } else {
        startVoiceRecording();
      }
    }

    function startVoiceRecording() {
      if (!recognition) {
        if (!initVoiceRecognition()) {
          return;
        }
      }
      
      try {
        const lang = document.getElementById('voiceLang').value;
        recognition.lang = lang;
        
        isRecording = true;
        recognition.start();
        
        document.getElementById('voiceBtn').innerHTML = '<i class="fas fa-stop mr-2 text-xl md:text-2xl"></i> Stop Recording';
        document.getElementById('voiceBtn').classList.remove('btn-primary');
        document.getElementById('voiceBtn').classList.add('btn-secondary');
        
        showMessage('Voice recording started!');
      } catch(e) {
        console.error('Error starting recognition:', e);
        showMessage('Could not start recording. Please try again.');
        stopVoiceRecording();
      }
    }

    function stopVoiceRecording() {
      isRecording = false;
      
      if (recognition) {
        try {
          recognition.stop();
        } catch(e) {
          console.log('Recognition already stopped');
        }
      }
      
      document.getElementById('voiceStatus').textContent = 'Recording stopped';
      document.getElementById('voiceBtn').innerHTML = '<i class="fas fa-microphone mr-2 text-xl md:text-2xl"></i> Start Recording';
      document.getElementById('voiceBtn').classList.remove('recording', 'btn-secondary');
      document.getElementById('voiceBtn').classList.add('btn-primary');
      
      setTimeout(() => {
        document.getElementById('voiceStatus').textContent = '';
      }, 2000);
    }

    function clearVoiceText() {
      document.getElementById('voiceText').value = '';
    }

    function copyVoiceText() {
      const text = document.getElementById('voiceText').value;
      navigator.clipboard.writeText(text).then(() => {
        showMessage('Text copied to clipboard');
      });
    }

    // Translation Functions
    function translateText() {
      const inputText = document.getElementById('inputText').value.trim();
      if (!inputText) {
        showMessage('Please enter text to translate');
        return;
      }
      
      const fromLang = document.getElementById('fromLang').value;
      const toLang = document.getElementById('toLang').value;
      
      if (fromLang === toLang) {
        showMessage('Please select different languages');
        return;
      }
      
      const translated = translationDB[toLang][inputText] || 
                        `Translation for "${inputText}" not found in database`;
      
      document.getElementById('translationResult').textContent = translated;
    }

    function speakTranslation() {
      const text = document.getElementById('translationResult').textContent;
      if (!text || text === 'Translation will appear here...') {
        showMessage('No translation to speak');
        return;
      }
      
      const toLang = document.getElementById('toLang').value;
      const langMap = {
        'en': 'en-US',
        'hi': 'hi-IN',
        'te': 'te-IN',
        'ta': 'ta-IN',
        'kn': 'kn-IN'
      };
      
      stopTTS();
      currentUtterance = new SpeechSynthesisUtterance(text);
      currentUtterance.lang = langMap[toLang];
      synth.speak(currentUtterance);
    }

    function loadPhrases() {
      const phrasesList = document.getElementById('phrasesList');
      phrasesList.innerHTML = '';
      
      const fromLang = document.getElementById('fromLang').value;
      const toLang = document.getElementById('toLang').value;
      
      Object.keys(translationDB[fromLang]).forEach(phrase => {
        const translation = translationDB[toLang][phrase];
        const phraseItem = document.createElement('div');
        phraseItem.className = 'word-item bg-white p-3 md:p-4 rounded-lg border-2 border-gray-200 cursor-pointer';
        phraseItem.innerHTML = `
          <div class="flex justify-between items-center">
            <div class="flex-1">
              <p class="font-semibold text-gray-800 text-sm md:text-base">${phrase}</p>
              <p class="text-gray-600 text-xs md:text-sm" style="user-select: none; -webkit-user-select: none;">${translation}</p>
            </div>
            <button onclick="speakPhrase('${translation}', '${toLang}')" class="ml-2 bg-purple-500 text-white p-2 rounded-full hover:bg-purple-600">
              <i class="fas fa-volume-up text-sm md:text-base"></i>
            </button>
          </div>
        `;
        phrasesList.appendChild(phraseItem);
      });
    }

    function speakPhrase(text, lang) {
      event.stopPropagation();
      const langMap = {
        'en': 'en-US',
        'hi': 'hi-IN',
        'te': 'te-IN',
        'ta': 'ta-IN',
        'kn': 'kn-IN'
      };
      
      stopTTS();
      currentUtterance = new SpeechSynthesisUtterance(text);
      currentUtterance.lang = langMap[lang];
      synth.speak(currentUtterance);
    }

    // Dictionary Functions
    function updateDictionary() {
      filterDictionary();
    }

    function speakWord(text, lang) {
      stopTTS();
      currentUtterance = new SpeechSynthesisUtterance(text);
      currentUtterance.lang = lang;
      synth.speak(currentUtterance);
    }

    function filterDictionary() {
      const searchTerm = document.getElementById('searchWord').value.trim();
      
      if (!searchTerm) {
        const dictionaryList = document.getElementById('dictionaryList');
        dictionaryList.innerHTML = '<p class="text-center text-gray-500 py-8">Enter a word to search in the dictionary</p>';
        return;
      }
      
      const dictLang = document.getElementById('dictLang').value;
      const langCode = dictLang.split('-')[0];
      const dictionaryList = document.getElementById('dictionaryList');
      
      const searchLower = searchTerm.toLowerCase();
      const matchedWords = dictionaryWords.filter(word => 
        word.toLowerCase().includes(searchLower)
      );
      
      if (matchedWords.length === 0) {
        dictionaryList.innerHTML = '<p class="text-center text-gray-500 py-4">No matches found. Try another word.</p>';
        return;
      }
      
      dictionaryList.innerHTML = '';
      
      matchedWords.forEach(word => {
        const translation = translationDB[langCode][word];
        
        if (!translation) {
          return;
        }
        
        const safeTranslation = translation.replace(/'/g, "\\'");
        
        const wordItem = document.createElement('div');
        wordItem.className = 'word-item bg-white p-3 md:p-4 rounded-lg border-2 border-gray-200';
        wordItem.innerHTML = `
          <div class="flex justify-between items-center">
            <div class="flex-1">
              <p class="font-semibold text-gray-800 text-sm md:text-base">${word}</p>
              <p class="text-gray-600 text-xs md:text-sm">${translation}</p>
            </div>
            <button onclick="speakWord('${safeTranslation}', '${dictLang}')" class="ml-2 bg-purple-500 text-white p-2 rounded-full hover:bg-purple-600">
              <i class="fas fa-volume-up text-sm md:text-base"></i>
            </button>
          </div>
        `;
        dictionaryList.appendChild(wordItem);
      });
    }

    // Paragraph Translation Functions
    async function translateParagraph() {
      const text = document.getElementById('paragraphInput').value.trim();
      if (!text) {
        showMessage('Please enter text to translate');
        return;
      }
      
      const fromLang = document.getElementById('paraFromLang').value;
      const toLang = document.getElementById('paraToLang').value;
      
      if (fromLang === toLang) {
        showMessage('Please select different languages');
        return;
      }
      
      document.getElementById('paragraphLoading').classList.remove('hidden');
      document.getElementById('paragraphOutput').textContent = 'Translating...';
      
      try {
        const url = `https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${fromLang}|${toLang}`;
        
        const response = await fetch(url);
        const data = await response.json();
        
        document.getElementById('paragraphLoading').classList.add('hidden');
        
        if (data.responseStatus === 200 && data.responseData) {
          document.getElementById('paragraphOutput').textContent = data.responseData.translatedText;
        } else {
          document.getElementById('paragraphOutput').textContent = 'Translation failed. Please try again.';
          showMessage('Translation failed');
        }
      } catch (error) {
        document.getElementById('paragraphLoading').classList.add('hidden');
        document.getElementById('paragraphOutput').textContent = 'Error connecting to translation service.';
        showMessage('Translation error');
        console.error(error);
      }
    }

    function speakParagraph() {
      const text = document.getElementById('paragraphOutput').textContent;
      if (!text || text === 'Translation will appear here...' || text === 'Translating...') {
        showMessage('No translation to speak');
        return;
      }
      
      const toLang = document.getElementById('paraToLang').value;
      const langMap = {
        'en': 'en-US',
        'hi': 'hi-IN',
        'te': 'te-IN',
        'ta': 'ta-IN',
        'kn': 'kn-IN',
        'es': 'es-ES',
        'fr': 'fr-FR',
        'de': 'de-DE',
        'ja': 'ja-JP',
        'zh': 'zh-CN'
      };
      
      stopTTS();
      currentUtterance = new SpeechSynthesisUtterance(text);
      currentUtterance.lang = langMap[toLang] || 'en-US';
      synth.speak(currentUtterance);
    }

    function showMessage(message) {
      const messageDiv = document.createElement('div');
      messageDiv.className = 'fixed top-4 right-4 bg-purple-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 text-sm md:text-base';
      messageDiv.textContent = message;
      document.body.appendChild(messageDiv);
      
      setTimeout(() => {
        messageDiv.remove();
      }, 3000);
    }

    // Element SDK Implementation
    async function onConfigChange(config) {
      document.getElementById('appTitle').textContent = config.app_title || defaultConfig.app_title;
      document.getElementById('ttsSectionTitle').textContent = config.tts_section_title || defaultConfig.tts_section_title;
      document.getElementById('ocrSectionTitle').textContent = config.ocr_section_title || defaultConfig.ocr_section_title;
      document.getElementById('voiceSectionTitle').textContent = config.voice_section_title || defaultConfig.voice_section_title;
      document.getElementById('translationSectionTitle').textContent = config.translation_section_title || defaultConfig.translation_section_title;
      document.getElementById('dictionarySectionTitle').textContent = config.dictionary_section_title || defaultConfig.dictionary_section_title;
      document.getElementById('paragraphSectionTitle').textContent = config.paragraph_section_title || defaultConfig.paragraph_section_title;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["app_title", config.app_title || defaultConfig.app_title],
        ["tts_section_title", config.tts_section_title || defaultConfig.tts_section_title],
        ["ocr_section_title", config.ocr_section_title || defaultConfig.ocr_section_title],
        ["voice_section_title", config.voice_section_title || defaultConfig.voice_section_title],
        ["translation_section_title", config.translation_section_title || defaultConfig.translation_section_title],
        ["dictionary_section_title", config.dictionary_section_title || defaultConfig.dictionary_section_title],
        ["paragraph_section_title", config.paragraph_section_title || defaultConfig.paragraph_section_title]
      ]);
    }

    // Initialize SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
      if (window.elementSdk && window.elementSdk.config) {
        onConfigChange(window.elementSdk.config);
      }
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ba96470254b3989',t:'MTc2Nzg1MTE2NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>